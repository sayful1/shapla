wp.customize.controlConstructor["shapla-background"]=wp.customize.Control.extend({ready:function(){"use strict";this.initKirkiControl()},initKirkiControl:function(){var e=this,n=e.setting._value,t=e.container.find(".shapla-color-control");(_.isUndefined(n["background-image"])||""===n["background-image"])&&(e.container.find(".background-wrapper > .background-repeat").hide(),e.container.find(".background-wrapper > .background-position").hide(),e.container.find(".background-wrapper > .background-size").hide(),e.container.find(".background-wrapper > .background-attachment").hide()),t.wpColorPicker({change:function(){setTimeout(function(){e.saveValue("background-color",t.val())},100)}}),e.container.on("change",".background-repeat select",function(){e.saveValue("background-repeat",jQuery(this).val())}),e.container.on("change click",".background-size input",function(){e.saveValue("background-size",jQuery(this).val())}),e.container.on("change",".background-position select",function(){e.saveValue("background-position",jQuery(this).val())}),e.container.on("change click",".background-attachment input",function(){e.saveValue("background-attachment",jQuery(this).val())}),e.container.on("click",".background-image-upload-button",function(n){var t=wp.media({multiple:!1}).open().on("select",function(){var n,o,a,i=t.state().get("selection").first(),r=i.toJSON().sizes.full.url;_.isUndefined(i.toJSON().sizes.medium)?_.isUndefined(i.toJSON().sizes.thumbnail)||(r=i.toJSON().sizes.thumbnail.url):r=i.toJSON().sizes.medium.url,n=i.toJSON().sizes.full.url,i.toJSON().id,i.toJSON().width,i.toJSON().height,""!==n&&e.container.find(".background-wrapper > .background-repeat, .background-wrapper > .background-position, .background-wrapper > .background-size, .background-wrapper > .background-attachment").show(),e.saveValue("background-image",n),o=e.container.find(".placeholder, .thumbnail"),a=e.container.find(".background-image-upload-remove-button"),o.length&&o.removeClass().addClass("thumbnail thumbnail-image").html('<img src="'+r+'" alt="" />'),a.length&&a.show()});n.preventDefault()}),e.container.on("click",".background-image-upload-remove-button",function(n){var t,o;n.preventDefault(),e.saveValue("background-image",""),t=e.container.find(".placeholder, .thumbnail"),o=e.container.find(".background-image-upload-remove-button"),e.container.find(".background-wrapper > .background-repeat").hide(),e.container.find(".background-wrapper > .background-position").hide(),e.container.find(".background-wrapper > .background-size").hide(),e.container.find(".background-wrapper > .background-attachment").hide(),t.length&&t.removeClass().addClass("placeholder").html("No file selected"),o.length&&o.hide()})},saveValue:function(e,n){var t=jQuery("#customize-control-"+this.id.replace("[","-").replace("]","")+" .background-hidden-value"),o=this.setting._value;o[e]=n,jQuery(t).attr("value",JSON.stringify(o)).trigger("change"),this.setting.set(o)}}),wp.customize.controlConstructor["shapla-color"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this,n=this.container.find(".shapla-color-control");void 0!==e.params.choices&&n.wpColorPicker(e.params.choices),n.wpColorPicker({change:function(t,o){setTimeout(function(){e.setting.set(n.val())},100)}})}}),wp.customize.controlConstructor["shapla-radio-buttonset"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;this.container.on("click","input",function(){e.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["shapla-radio-image"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this;this.container.on("click","input",function(){e.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["shapla-slider"]=wp.customize.Control.extend({ready:function(){"use strict";var e,n,t,o,a=this;jQuery("input[type=range]").on("mousedown",function(){e=jQuery(this).attr("value"),jQuery(this).mousemove(function(){e=jQuery(this).attr("value"),jQuery(this).closest("label").find(".shapla_range_value .value").text(e)})}),jQuery(".shapla-slider-reset").click(function(){n=jQuery(this).closest("label").find("input"),t=n.data("reset_value"),n.val(t),n.change(),jQuery(this).closest("label").find(".shapla_range_value .value").text(t)}),o="postMessage"===a.setting.transport?"mousemove change":"change",this.container.on(o,"input",function(){a.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["shapla-toggle"]=wp.customize.Control.extend({ready:function(){"use strict";var e=this,n=e.setting._value;this.container.on("change","input",function(){n=!!jQuery(this).is(":checked"),e.setting.set(n)})}});